name: Transform and Inline Mermaid
description: Transform and Inline Mermaid charts in SVG images!

branding:
    icon: at-sign
    color: blue

inputs:
  file-regex:
    description: The regex used to search for files where mermaid graph inlining will be applied
    default: "index"
    required: false

  root-folder:
    description: The root folder used to search the file that match the file-regex passed
    default: "build"
    required: false

  config-file:
    description: The file used to configure mermaid (toml)
    default: "config.toml"
    required: false

runs:
  using: composite
  steps:
    - uses: actions/setup-node@v3
      with:
        node-version: 16
    - name: Install Dependecies
      run: npm install
      shell: bash
    - name: Inline charts
      run: node postprocessing.js
      shell: bash